    int largestRectangleArea(vector<int> &height) {  
        int sum = 0, max_sum = 0, tmp = 0;  
        if (height.size() == 0) return 0;  
        height.push_back(0);  
        stack<int> stack;  
        for (int i = 0; i < height.size(); ++i) {  
            if (stack.empty() || height[i] > height[stack.top()]) {  
                //std::cout<<"push i = "<<i<<std::endl;  
                stack.push(i);  
            } else {  
                tmp = stack.top();  
                stack.pop();  
//                sum = height[tmp] * (i - tmp); //会错误计算={2,1,5,6,2,3};中1,2,3的stack构成的矩形。  
                sum = height[tmp] * (stack.empty()? i : (i - stack.top() - 1));  
                max_sum = max_sum > sum ? max_sum : sum;  
//                std::cout<<"sum = "<<sum<<", i = "<<i<<", height[tmp] = "<<height[tmp]<<", tmp = "<<tmp<<std::endl;  
                i--;  
            }  
        }  
        return max_sum;  
    }  



int maximalRectangle(vector<vector<char> > &matrix) {  
  
    if (matrix.size()<=0 || matrix[0].size()<=0) return 0;  
    int row = matrix.size();  
    int col = matrix[0].size();  
    vector< vector<int> > heights(row, vector<int> col);  
  
    int maxArea = 0;  
    for(int i=0; i<row; i++){  
        for(int j=0; j<col; j++) {  
            if (matrix[i][j]=='1'){  
                heights[i][j] = (i==0 ? 1 : heights[i-1][j] + 1); //这行可以避免把第0行的赋值单独拿出来。  
            }  
        }  
        int area = largestRectangleArea(heights[i]);  
        if (area > maxArea){  
            maxArea = area;  
        }  
    }  
  
    return maxArea;  
  
}  